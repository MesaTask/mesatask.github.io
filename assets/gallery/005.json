{
    "prompt_instructions": "You are an expert designing a 3D scene layout on tabletop from an embodied task description. Output a reasoning process, a scene graph text, and a tabletop layout JSON.\n**Spatial definition:**:\n1. Coordinate System: Origin at tabletop's proximal top-left (0, 0, 0). x-axis right (+), y-axis from proximal to distal (+), z-axis up (+). Observer at -y, looking +y.\n2. Direction Mappings: Direction Mappings: Front (small y), Back (large y), Left (small x), Right (large x), Facing based on z-axis rotation. (e.g., \"face to front\" points towards the observer, i.e., the -y direction). |\n3. Spatial Relationship\n    - Position (Nine-Grid): x (left/middle/right) + y (front/middle/back).\n    - Horizontal: Compare x/y for left/right, front/back. Keep closest pairs, remove duals.\n    - Vertical: Compare z for above/below. Keep closest pairs, remove duals.\n    - Containment: Compare z and x/y overlap for inside.\n\n**Input:** JSON object with keys: `Environment` (string), \"item_placement_zone\": [X_min, X_max, Y_min, Y_max], /* cm */, 'sink_zone': [X_min, X_max, Y_min, Y_max], /* cm */(Only exist when it is a bathroom vanity), `Task` (string), `Goal` (list[str]), `Action Sequence` (list[str]), `Objects` (list[str] - types).\n\n**Processing & Scene Graph:**\n1.  **Analyze Task:** Understand the input JSON.\n2.  **Identify Objects:** List **Core Task Objects** (involved in `Objects`/`Goal`/`Action Sequence`) and **Environment Objects** (draw from `Environment`, more is better). Note types/quantities. Assign instance IDs (e.g., `pen_0`).\n3.  **Reasoning Paragraph:** Write a paragraph explaining initial object placement based on task analysis. Include:\n    *   Intro sentence (goal: layout generation; total object count).\n    *   Core Task Objects list (counts & instance IDs).\n    *   Environment Objects list (counts & instance IDs).\n    *   Placement Reasoning Paragraph: A coherent paragraph of detailed scene description, including the objects, their positions, and the overall layout of the tabletop infered from the given `environment`/`Goal`\n4.  **Scene Graph Text:** Based *only* on reasoning, generate scene graph text:\n    *   Nodes: 1. `(instance_id, is at, Position (Nine-Grid))` per object. 2. `(instance_id, face to, direction)` per object.\n    *   Edges: Salient `(subject_id, relation, object_id)` (e.g., `left of`). Avoid redundancy. Each triplet on a new line. Relation includes Containment/Vertical/Horizontal classes.\n\n**Output Format (Strict Order):**\n1.  Reasoning Paragraph (from Step 3).\n2.  Scene Graph Text (from Step 4, newline separated triplets).\n3.  The exact text block:\nTherefore, the scene layout is:\n**Final Answer**\n\n4.  Scene Layout JSON (immediately following **Final Answer**, no extra text before/after).\n\n**JSON Format:**\n```json\n{ \"item_placement_zone\": /* follow the input `item_placement_zone` */\n  \"sink_zone\": /* follow the input `sink_zone` */ (if not present, do not output this key)\n  \"objects\": [\n    {\n      \"instance\": \"type_instance_id\", /* e.g., pen_0 */\n      \"description\": \"Brief text.\",\n      \"z_rotation\": 0.0, /* degrees */ (z_rotation 0 means the object is facing the observer)(consider the bbox after rotation, collision, and other factor)\n      \"size\": [width, depth, height], /* cm */\n      \"position\": [x, y, z] /* cm, center coords, Calculate Z based on support: Z â‰ˆ height/2 if on table, else account for \"inside\" or \"on the top of\" relation. */\n    }\n    /* ... more objects */ (object order should from large size to small size)\n  ]\n}\n```\n-   Use consistent instance IDs from Step 2.\n-   Provide reasonable object `size` estimates.\n-   Ensure valid JSON structure.\n\nGenerate the three output parts consecutively as specified. The input embodied task description is as follows:",
    "input_task_description": {
        "Environment": "Desk with a laptop, calendar, telephone, mouse, cup, and various stationery items arranged around.",
        "item_placement_zone": [
            0.0,
            135.6,
            0.0,
            66.0
        ],
        "Task": "Prepare workspace for a video call by clearing clutter and arranging essentials",
        "Goal": [
            "Pick up the notebook to the right of the telephone",
            "Place the notebook to the left of the laptop",
            "Pick up the cup behind the mouse",
            "Place the cup to the right of the laptop",
            "Pick up the scissors next to the telephone",
            "Place the scissors behind the cup"
        ],
        "Objects cluster": [
            "Notebook",
            "Cup",
            "Scissors",
            "Laptop"
        ]
    },
    "reasoning_paragraph": "The goal is to determine the initial object arrangement on the workspace based on the provided task. The scene suggests a typical office or work desk environment, with various stationery and electronic devices organized for a video call preparation. The core task objects include a notebook, a cup, scissors, and a laptop, totaling four items. Additional objects present in the scene include a calendar, a telephone, a mouse, and several pens, which serve as environment objects that support the workspace's functionality. The layout indicates that the laptop is centrally positioned on the desk, serving as the focal point. To its left, the calendar and telephone are placed, with the notebook initially located to the right of the telephone, and the scissors nearby. The cup is positioned behind the mouse, which is situated in front of the laptop, with the scissors also close to the cup. The notebooks and pens are arranged in a way that allows easy access, with the notebook initially on the right side of the telephone, and the cup and scissors nearby, facilitating the task of moving and reorganizing these items as specified. The overall layout appears organized, with objects spaced to prevent interference and support the task of clearing clutter and arranging essentials. Based on this task analysis, the scene graph is arranged as follows:",
    "scene_graph": [
        "(laptop_0, is at, center)",
        "(laptop_0, face to, front)",
        "(notebook_1, is at, center)",
        "(notebook_1, face to, front_right)",
        "(calendar_0, is at, middle_left)",
        "(calendar_0, face to, front)",
        "(telephone_0, is at, center)",
        "(telephone_0, face to, front)",
        "(cup_0, is at, center)",
        "(cup_0, face to, front)",
        "(pen_1, is at, center)",
        "(pen_1, face to, front)",
        "(mouse_0, is at, center)",
        "(mouse_0, face to, front)",
        "(pen_2, is at, center)",
        "(pen_2, face to, front)",
        "(laptop_0, right of, pen_1)",
        "(laptop_0, right of, pen_2)",
        "(laptop_0, right of, telephone_0)",
        "(laptop_0, left of, cup_0)",
        "(laptop_0, left of, notebook_1)",
        "(notebook_1, in front of, cup_0)",
        "(notebook_1, behind, mouse_0)",
        "(calendar_0, left of, telephone_0)",
        "(calendar_0, left of, pen_2)",
        "(calendar_0, left of, pen_1)",
        "(calendar_0, behind, mouse_0)",
        "(telephone_0, left of, pen_2)",
        "(telephone_0, behind, pen_1)",
        "(cup_0, behind, mouse_0)",
        "(cup_0, right of, pen_1)",
        "(cup_0, right of, pen_2)",
        "(pen_1, in front of, pen_2)",
        "(mouse_0, right of, pen_1)",
        "(mouse_0, right of, pen_2)"
    ],
    "scene_layout_json": {
        "item_placement_zone": [
            0.0,
            135.6,
            0.0,
            66.0
        ],
        "objects": [
            {
                "instance": "laptop_0",
                "size": [
                    38.2,
                    36.9,
                    24.6
                ],
                "position": [
                    71.5,
                    39.3,
                    12.3
                ],
                "z_rotation": 0.0,
                "description": "Laptop with a sleek silver matte body, large vibrant screen, and backlit keyboard."
            },
            {
                "instance": "notebook_1",
                "size": [
                    20.0,
                    22.8,
                    5.5
                ],
                "position": [
                    106.8,
                    36.0,
                    2.8
                ],
                "z_rotation": 33.3,
                "description": "Closed notebook, soft cover, rectangular shape, rounded edges, light pink/beige patterns, white spiral bindings."
            },
            {
                "instance": "calendar_0",
                "size": [
                    28.3,
                    18.5,
                    20.8
                ],
                "position": [
                    17.5,
                    45.2,
                    10.4
                ],
                "z_rotation": 15.3,
                "description": "Colorful triangular desk calendar with spiral binding, vibrant design, and bold colors."
            },
            {
                "instance": "telephone_0",
                "size": [
                    21.6,
                    18.3,
                    12.2
                ],
                "position": [
                    35.8,
                    52.1,
                    6.0
                ],
                "z_rotation": 19.7,
                "description": "Modern telephone, sleek design, touchscreen display, numeric keypad, black and silver tones."
            },
            {
                "instance": "cup_0",
                "size": [
                    14.7,
                    10.4,
                    11.2
                ],
                "position": [
                    106.2,
                    52.9,
                    5.6
                ],
                "z_rotation": 0.0,
                "description": "White ceramic cup, cylindrical shape, comfortable handle, no intricate patterns."
            },
            {
                "instance": "pen_1",
                "size": [
                    5.8,
                    15.5,
                    2.0
                ],
                "position": [
                    46.9,
                    32.2,
                    1.1
                ],
                "z_rotation": -18.2,
                "description": "Sleek black ballpoint pen with a smooth barrel, grip section, and shiny clip."
            },
            {
                "instance": "mouse_0",
                "size": [
                    6.2,
                    12.1,
                    2.3
                ],
                "position": [
                    80.0,
                    12.7,
                    1.1
                ],
                "z_rotation": 0.0,
                "description": "Sleek wireless mouse with a curved, glossy white surface and minimalistic buttons."
            },
            {
                "instance": "pen_2",
                "size": [
                    5.0,
                    13.4,
                    1.7
                ],
                "position": [
                    44.8,
                    37.9,
                    0.8
                ],
                "z_rotation": -19.2,
                "description": "Sleek black ballpoint pen with a smooth barrel, grip section, and shiny clip."
            }
        ]
    }
}